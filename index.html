<!DOCTYPE HTML>

<html><head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- <meta name="viewport" content="width=560, user-scalable=0"> -->
<!--meta name="viewport" content="width=700; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=0;"-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<title>sGlide - working</title>

<link rel="stylesheet" href="main.css" />

<style>
/*#slider1 {transform-origin: 460px 260px !important;}*/
/*#slider2 {margin: -130px -290px !important;}*/
/*#slider1 {margin-left: 60px !important;}*/
/*.slider_knob {background-color: #ccc !important;}*/
.follow_bar {background-color: #363;}
/*#slider1_vert-marks {margin-left: 60px !important;}*/
</style>

<!-- <script type="text/javascript" src="polyfills.js"></script> -->
<!-- <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> -->
<script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script type="text/javascript" src="jquery.sglide.js"></script>
<!-- <script type="text/javascript" src="sglide.js"></script> -->
<!-- <script type="text/javascript" src="../../~web~/sGlide/jquery.sglide.2.min.js"></script> -->
<!-- <script type="text/javascript" src="../../~web~/sGlide/sglide.2.1.1.min.js"></script> -->

<script type="text/javascript">
	function run(){
		var pct = document.getElementById('percent');
		var cb = function(o){
			// console.log('>> o', o);
			console.log('> context',this);
			pct.innerHTML = o.id+': '+Math.round(o.percent) + '%';
			// $pct.text(Math.round(o.percent)+'%');
			// document.getElementById('percent').innerHTML = o.id+': '+Math.round(o.value) + '%';
		};
		var options = {
			'startAt': 65,
			'height': 20,
			'width': 385,
			// 'unit': 'px',
			'image': 'img/knob_.png',
			// 'pill': false,
			'snap': {
				'marks': true,
				// 'type': 'hard',
				// 'sensitivity': 3,
				'points': 6
			},
			'colorShift': ['#3a4d31', '#7bb560'],
			'vertical': true,
			'buttons': true,
			'totalRange': [-58,102],
			// 'disabled': true,
			// 'noHandle': true,
			'drop': cb,
			'onSnap': cb,
			'onButton': cb
		};

		/*sglideArr = [];
		// var nodes = document.querySelectorAll('.slider_bar');
		var nodes = document.getElementsByClassName('slider_bar');

		for (const el of nodes){
			sglideArr.push(new sGlide(el, options).load(function(data){	// can't use arrow function as it loses context
				// console.log('>> load!', data, this);
				// this.startAt(15);
				// this.destroy();
				// data.percent = 15;
				cb(data);
				document.getElementById('container').style.visibility = 'visible';
			}));
		}*/

		/*for (const glide of sglideArr){
			glide.load(function(data){	// can't use arrow function as it loses context
				console.log('>> load!', data, this);
				this.startAt(15);
				// this.destroy();
				document.getElementById('container').style.visibility = 'visible';
			});
		}
		console.log('sGlideArr',sglideArr);*/

		var $pct = $('#percent');
		$('.slider_bar').sGlide(options)//;
		//$('.slider_bar')
		// .on('sGlide.ready', (e, data) => console.log('>> ready', data));
		.on('sGlide.ready', function(e, data){
			console.log('>> ready', this);
			// $(this).sGlide('startAt', 66.66);
			$('#container').css('visibility', 'visible');
		});

		// setTimeout(function(){
		// 	$('.slider_bar').sGlide('destroy');
		// }, 0);
	};
</script>

</head><body onload="run()">

	<div id="container" style="visibility: hidden;">
		<div id="percent">%</div>
		<div id="slider1" class="slider_bar" data-keys="ctrl" style="background-color:#069; border-radius:10px; height:40px"></div><br /><div id="slider2" class="slider_bar_"></div>
		<!-- <br><input type="text" value="asdljkas dlkajsd lakjs dlasjd" /> -->
	</div>

</body></html>